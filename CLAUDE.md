# AI Assistant Guidelines for Billiard Frontend Project

このファイルはClaude Code、Cursor、その他AIツール向けのプロジェクト固有のガイドラインと指示を記載しています。

## 📋 必須のワークフロー

### 🔧 **コードの変更・デプロイ前チェックリスト**
1. **テスト実行**: `npm test` - 全テストがパスすることを確認
2. **ビルド確認**: `npm run build` - TypeScriptエラーがないことを確認
3. **リントチェック**: `npm run lint` (警告は許可、エラーは修正)
4. **カバレッジ確認**: `npm test -- --coverage` (90%以上を維持)

### 📤 **Git操作のルール**
- コミット前に必ず上記チェックリストを実行
- コミットメッセージは日本語で機能追加内容を明確に記載
- 最後に必ず `🤖 Generated with [Claude Code](https://claude.ai/code)` と `Co-Authored-By: Claude <noreply@anthropic.com>` を追加
- pushは最後に実行（明示的な指示がある場合のみ）

## 🎯 **テスト品質基準**

### **カバレッジ目標**
- **全体**: 90%以上を維持
- **重要コンポーネント**: 95%以上
- **新規コード**: 必ず対応するテストを追加

### **テスト構造**
- 共通テストユーティリティ: `src/__tests__/utils/testHelpers.tsx` を活用
- 大きなテストファイル（1000行超）は機能別分割を検討
- モック設定は各テストファイル内で適切に管理

## 🏗️ **開発規約**

### **コード品質**
- TypeScriptの厳密な型定義を維持
- ESLintエラーは必ず修正（警告は許可）
- 既存のコード規約とパターンに従う

### **UIコンポーネント**
- Material-UIの使用を継続
- レスポンシブデザイン対応（xs, sm, md, lg）
- 日本語UIを基本とする

### **ゲーム機能**
- **セットマッチ**: セット履歴とプレイヤー入れ替え機能
- **ローテーション**: ボールポケット履歴とスコア計算
- **ボーラード**: フレーム管理とスコア表示
- **チェスクロック**: レスポンシブ対応と正しい操作ロジック

## 📁 **ファイル構造規約**

```
src/
├── components/          # UIコンポーネント
│   ├── games/          # ゲーム固有コンポーネント
│   ├── common/         # 共通コンポーネント  
│   └── __tests__/      # テストファイル
├── __tests__/utils/    # 共通テストユーティリティ
├── games/              # ゲームエンジン
├── hooks/              # カスタムフック
├── contexts/           # React Context
├── types/              # TypeScript型定義
└── utils/              # ユーティリティ関数
```

## 🚨 **注意事項**

### **禁止事項**
- `any` 型の使用は最小限に抑制
- 新規ファイル作成は必要最小限
- 既存テストを壊さない
- 機能性に影響するリントエラーは放置しない

### **推奨事項**
- 既存パターンとコード規約の継承
- 段階的改善アプローチ
- ユーザビリティを重視した実装
- モバイルファーストの設計

## 💡 **トラブルシューティング**

### **よくある問題**
- TypeScriptエラー: 型定義の確認と修正
- テスト失敗: モック設定とテストデータの確認
- ビルドエラー: インポートパスとエクスポートの確認
- カバレッジ低下: 新規コードに対応するテスト追加

### **デバッグコマンド**
```bash
# 特定のテストファイルのみ実行
npm test -- --run path/to/test.tsx

# カバレッジ詳細表示
npm test -- --coverage --reporter=verbose

# ビルド詳細ログ
npm run build --verbose
```

## 📝 **定期メンテナンス**

- 月1回: 依存関係の更新確認
- テストファイル肥大化の監視（1000行超の分割検討）
- カバレッジレポートの確認と改善
- 不要なコードとコメントの削除

---

**最終更新**: 2025-08-24
**対象AIツール**: Claude Code, Cursor, GitHub Copilot, その他